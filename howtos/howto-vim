#!/bin/zsh

# This script gets run in the top-level directory and invokes
# my "configure" script there; the "-C src" switch makes the
# script run in the "src" subdirector.

if [[ -x /bin/pump ]]; then
	TRAPEXIT()	{
		if [[ -x /bin/pump ]]; then
			pump --shutdown
		fi
	}
	eval $(pump --startup)
fi

#

configure -C src -f -m -n vim						\
	--								\
	--with-features=huge						\
	--with-tlib=ncurses						\
	--enable-gui=gtk3						\
	--enable-pythoninterp=yes					\
	--enable-python3interp=yes					\
	--enable-tclinterp						\
	--enable-fontset						\
	--disable-netbeans						\
	--enable-cscope							\
	--enable-luainterp=yes						\
	"$@"								\
	2>&1							|
tee howto.log
exit $?
# QUARRANTEENED
	--enable-perlinterp=dynamic					\
# UNUSED
	--disable-nextaw-check						\
	--enable-athena-check						\
	--enable-gnome-check						\
	--enable-gtk2-check						\
	--enable-gui=athena						\
	--enable-gui=gnome						\
	--enable-gui=gtk2						\
	--enable-gui=nextaw						\
	--enable-motif-check						\
	--enable-neXtaw-check						\
	--enable-rubyinterp=yes						\
	--enable-sniff							\
